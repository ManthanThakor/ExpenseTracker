@{
    ViewData["Title"] = "Home Page";
}

<div class="container-fluid p-0">
    <!-- Hero Section with Slider -->
    <div id="expenseTrackerCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#expenseTrackerCarousel" data-bs-slide-to="0" class="active"></button>
            <button type="button" data-bs-target="#expenseTrackerCarousel" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#expenseTrackerCarousel" data-bs-slide-to="2"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <div class="d-block w-100 bg-primary text-white p-5" style="height: 400px;">
                    <div class="container d-flex flex-column justify-content-center h-100">
                        <h1 class="display-4 fw-bold">Track Your Finances</h1>
                        <p class="lead">Take control of your spending habits and achieve your financial goals.</p>
                        <a href="/Transactions/Create" class="btn btn-light btn-lg mt-3">Add Transaction</a>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <div class="d-block w-100 bg-success text-white p-5" style="height: 400px;">
                    <div class="container d-flex flex-column justify-content-center h-100">
                        <h1 class="display-4 fw-bold">Categorize Your Expenses</h1>
                        <p class="lead">Organize transactions by custom categories to see where your money goes.</p>
                        <a href="/Categories" class="btn btn-light btn-lg mt-3">Manage Categories</a>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <div class="d-block w-100 bg-info text-white p-5" style="height: 400px;">
                    <div class="container d-flex flex-column justify-content-center h-100">
                        <h1 class="display-4 fw-bold">Visualize Your Spending</h1>
                        <p class="lead">Get insights with beautiful charts and detailed financial reports.</p>
                        <a href="/Dashboard" class="btn btn-light btn-lg mt-3">View Dashboard</a>
                    </div>
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#expenseTrackerCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#expenseTrackerCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>

    <!-- Features Section -->
    <div class="container py-5">
        <h2 class="text-center mb-5">Features that help you manage money better</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="bi bi-currency-dollar fs-1 text-primary"></i>
                        </div>
                        <h3 class="card-title">Track Expenses</h3>
                        <p class="card-text">Easily record and categorize your daily expenses and income to keep track of where your money is going.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="bi bi-pie-chart-fill fs-1 text-success"></i>
                        </div>
                        <h3 class="card-title">Visual Reports</h3>
                        <p class="card-text">Get insights into your spending habits with beautiful charts and detailed financial reports.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="bi bi-bookmark-check fs-1 text-info"></i>
                        </div>
                        <h3 class="card-title">Budget Goals</h3>
                        <p class="card-text">Set financial goals and track your progress to stay motivated and achieve financial freedom.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Stats Section -->
    <div class="bg-light py-5">
        <div class="container">
            <h2 class="text-center mb-5">Your Financial Overview</h2>
            <div class="row g-4">
                <div class="col-md-3">
                    <div class="card border-0 bg-primary text-white">
                        <div class="card-body text-center">
                            <h3 class="card-title">Total Income</h3>
                            <p class="display-6">$@ViewBag.TotalIncome</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card border-0 bg-danger text-white">
                        <div class="card-body text-center">
                            <h3 class="card-title">Total Expenses</h3>
                            <p class="display-6">$@ViewBag.TotalExpenses</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card border-0 bg-success text-white">
                        <div class="card-body text-center">
                            <h3 class="card-title">Net Balance</h3>
                            <p class="display-6">$@ViewBag.NetBalance</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card border-0 bg-info text-white">
                        <div class="card-body text-center">
                            <h3 class="card-title">Transactions</h3>
                            <p class="display-6">@ViewBag.TransactionCount</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Transactions Section -->
    <div class="container py-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>Recent Transactions</h2>
            <a href="/Transactions" class="btn btn-outline-primary">View All</a>
        </div>

        @if (ViewBag.RecentTransactions != null && ViewBag.RecentTransactions.Count > 0)
        {
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Title</th>
                            <th>Category</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var transaction in ViewBag.RecentTransactions)
                        {
                            <tr>
                                <td>@transaction.Date.ToString("MMM dd, yyyy")</td>
                                <td>@transaction.Title</td>
                                <td>
                                    <span class="badge" style="background-color: @transaction.Category.Color">
                                        @transaction.Category.Name
                                    </span>
                                </td>
                                <td class="@(transaction.Category.Type == "Income" ? "text-success" : "text-danger")">
                                    @(transaction.Category.Type == "Income" ? "+" : "-")$@transaction.Amount.ToString("0.00")
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        else
        {
            <div class="alert alert-info">
                <p>No recent transactions found. Start by <a href="/Transactions/Create">adding a new transaction</a>.</p>
            </div>
        }
    </div>

    <!-- Call to Action Section -->
    <div class="bg-primary text-white py-5">
        <div class="container text-center">
            <h2 class="display-5 mb-4">Ready to take control of your finances?</h2>
            <p class="lead mb-4">Start tracking your expenses today and make smarter financial decisions.</p>
            <div class="d-flex justify-content-center gap-3">
                <a href="/Account/Register" class="btn btn-light btn-lg">Sign Up Now</a>
                <a href="/Home/About" class="btn btn-outline-light btn-lg">Learn More</a>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Initialize the carousel with a 5-second interval
        document.addEventListener('DOMContentLoaded', function() {
            var myCarousel = document.getElementById('expenseTrackerCarousel');
            var carousel = new bootstrap.Carousel(myCarousel, {
                interval: 5000
            });
        });
    </script>
}